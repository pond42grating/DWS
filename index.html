<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration and Admin Control</title>
    <style>
        body {
            background-color: #f4f4f9; /* Light background color */
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1, h2 {
            color: #333;
        }
        .hidden { display: none; }
        .auth-section, .error { margin-bottom: 15px; }
        .back-btn { cursor: pointer; color: blue; font-size: 14px; }
        .error { color: red; }
        input {
            margin: 5px 0;
            padding: 8px;
            width: 100%;
            box-sizing: border-box;
        }
        button {
    background-color: #4b6cb7; /* Dark Blue */
    color: white;
    padding: 10px;
    border: none;
    cursor: pointer;
    margin: 5px 0;
    border-radius: 5px; /* Optional, to round the button corners */
}

button:hover {
    background-color: #3a5f8c; /* Slightly lighter blue on hover */
}
        .container {
            max-width: 600px;
            margin: auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>User Registration and Admin Control</h1>

        <!-- Authentication Section (Sign-In and Sign-Up) -->
        <div id="authSection">
            <!-- Sign-In Section -->
            <div class="auth-section" id="signinSection">
                <h2>Sign In</h2>
                <label for="signinUsername">Username:</label>
                <input type="text" id="signinUsername" placeholder="Enter Username" required><br><br>

                <label for="signinPassword">Password:</label>
                <input type="password" id="signinPassword" placeholder="Enter Password" required><br><br>

                <button id="signinBtn">Sign In</button>
                <p class="error" id="signinError"></p>
                <button id="goToSignupBtn">Sign Up</button> <!-- Button to go to Sign Up -->
                <br>
                <span id="forgotPasswordBtn" class="back-btn">Forgot Password?</span> <!-- Forgot Password Link -->
            </div>

            <!-- Sign-Up Section -->
            <div id="signupSection" class="auth-section hidden">
                <span class="back-btn" id="backToLoginBtn">← Back to Login</span> <!-- Back Button -->
                <h2>Sign Up</h2>
                <label for="signupUsername">Username:</label>
                <input type="text" id="signupUsername" placeholder="Enter Username" required><br><br>

                <label for="signupPassword">Password:</label>
                <input type="password" id="signupPassword" placeholder="Enter Password" required><br><br>

                <label for="signupConfirmPassword">Confirm Password:</label>
                <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required><br><br>

                <label for="signupSecretCode">Secret Code:</label>
                <input type="text" id="signupSecretCode" placeholder="Enter Secret Code" required><br><br>

                <button id="signupBtn">Sign Up</button>
                <p class="error" id="signupError"></p>
            </div>

            <!-- Forgot Password Section -->
            <div id="forgotPasswordSection" class="auth-section hidden">
                <span class="back-btn" id="backToLoginFromForgotBtn">← Back to Login</span>
                <h2>Reset Password</h2>
                <label for="forgotUsername">Username:</label>
                <input type="text" id="forgotUsername" placeholder="Enter Username" required><br><br>

                <label for="forgotSecretCode">Secret Code:</label>
                <input type="text" id="forgotSecretCode" placeholder="Enter Secret Code" required><br><br>

                <label for="forgotPassword">New Password:</label>
                <input type="password" id="forgotPassword" placeholder="Enter New Password" required><br><br>

                <label for="forgotConfirmPassword">Confirm New Password:</label>
                <input type="password" id="forgotConfirmPassword" placeholder="Confirm New Password" required><br><br>

                <button id="resetPasswordBtn">Reset Password</button>
                <p class="error" id="forgotError"></p>
            </div>
        </div>

        <!-- Admin Login Section -->
        <div id="adminSection" class="hidden">
            <h2>Admin Login</h2>
            <label for="adminUsername">Admin Username:</label>
            <input type="text" id="adminUsername" placeholder="Enter Admin Username" required><br><br>

            <label for="adminPassword">Admin Password:</label>
            <input type="password" id="adminPassword" placeholder="Enter Admin Password" required><br><br>

            <button id="adminLoginBtn">Login as Admin</button>
            <p class="error" id="adminError"></p>
        </div>

        <!-- Admin Dashboard (After Admin Login) -->
        <div id="adminDashboard" class="hidden">
            <span class="back-btn" id="backToSignInBtn">← Back to Sign In</span> <!-- Back Button to Sign In -->
            <h2>Admin Dashboard</h2>
            <h3>Sign-Up Requests</h3>
            <ul id="signupRequestsList"></ul>
            <button id="logoutAdminBtn">Logout</button>
        </div>
    </div>

    <script>
        // Initialize storage for users
        let users = JSON.parse(localStorage.getItem("users")) || [];
        const adminUsernameStored = "admin"; // Predefined Admin Username
        const adminPasswordStored = "admin123"; // Predefined Admin Password

        // DOM Elements
        const signupBtn = document.getElementById("signupBtn");
        const signinBtn = document.getElementById("signinBtn");
        const adminLoginBtn = document.getElementById("adminLoginBtn");

        const signupUsername = document.getElementById("signupUsername");
        const signupPassword = document.getElementById("signupPassword");
        const signupConfirmPassword = document.getElementById("signupConfirmPassword");
        const signupSecretCode = document.getElementById("signupSecretCode");
        const signinUsername = document.getElementById("signinUsername");
        const signinPassword = document.getElementById("signinPassword");
        const forgotUsername = document.getElementById("forgotUsername");
        const forgotSecretCode = document.getElementById("forgotSecretCode");
        const forgotPassword = document.getElementById("forgotPassword");
        const forgotConfirmPassword = document.getElementById("forgotConfirmPassword");
        const adminUsername = document.getElementById("adminUsername");
        const adminPassword = document.getElementById("adminPassword");

        const signupError = document.getElementById("signupError");
        const signinError = document.getElementById("signinError");
        const forgotError = document.getElementById("forgotError");
        const adminError = document.getElementById("adminError");

        const authSection = document.getElementById("authSection");
        const signupSection = document.getElementById("signupSection");
        const forgotPasswordSection = document.getElementById("forgotPasswordSection");
        const adminSection = document.getElementById("adminSection");
        const adminDashboard = document.getElementById("adminDashboard");

        const signupRequestsList = document.getElementById("signupRequestsList");

        // Show sign-up form
        document.getElementById("goToSignupBtn").addEventListener("click", () => {
            document.getElementById("signinSection").classList.add("hidden");
            signupSection.classList.remove("hidden");
        });

        // Show forgot password form
        document.getElementById("forgotPasswordBtn").addEventListener("click", () => {
            document.getElementById("signinSection").classList.add("hidden");
            forgotPasswordSection.classList.remove("hidden");
        });

        // Go back to login screen from sign-up
        document.getElementById("backToLoginBtn").addEventListener("click", () => {
            signupSection.classList.add("hidden");
            document.getElementById("signinSection").classList.remove("hidden");

            // Clear Sign Up fields when coming back to Login
            signupUsername.value = '';
            signupPassword.value = '';
            signupConfirmPassword.value = '';
            signupSecretCode.value = '';
        });

        // Go back to login screen from forgot password
        document.getElementById("backToLoginFromForgotBtn").addEventListener("click", () => {
            forgotPasswordSection.classList.add("hidden");
            document.getElementById("signinSection").classList.remove("hidden");

            // Clear Forgot Password fields
            forgotUsername.value = '';
            forgotSecretCode.value = '';
            forgotPassword.value = '';
            forgotConfirmPassword.value = '';
        });

        // Go back to login screen from admin dashboard
        document.getElementById("backToSignInBtn").addEventListener("click", () => {
            adminDashboard.classList.add("hidden");
            document.getElementById("signinSection").classList.remove("hidden");

            // Clear Admin Login fields
            adminUsername.value = '';
            adminPassword.value = '';
        });

        // Sign-in functionality
        signinBtn.addEventListener("click", () => {
            const username = signinUsername.value.trim();
            const password = signinPassword.value.trim();

            const user = users.find(u => u.username === username && u.password === password);
            if (user) {
                if (user.isApproved) {
                    alert("Sign In Successful!");
                    signinUsername.value = '';
                    signinPassword.value = '';
                    // Redirect to admin dashboard or user page
                    adminDashboard.classList.remove("hidden");
                    document.getElementById("signinSection").classList.add("hidden");
                } else {
                    signinError.textContent = "Your account is pending approval.";
                }
            } else {
                signinError.textContent = "Invalid credentials.";
            }
        });

        // Admin login functionality
        adminLoginBtn.addEventListener("click", () => {
            const username = adminUsername.value.trim();
            const password = adminPassword.value.trim();

            if (username === adminUsernameStored && password === adminPasswordStored) {
                alert("Admin Login Successful!");
                adminDashboard.classList.remove("hidden");
                adminSection.classList.add("hidden");
            } else {
                adminError.textContent = "Invalid Admin credentials.";
            }
        });

        // Sign-up a new user with password confirmation
        signupBtn.addEventListener("click", () => {
            const username = signupUsername.value.trim();
            const password = signupPassword.value.trim();
            const confirmPassword = signupConfirmPassword.value.trim();
            const secretCode = signupSecretCode.value.trim();

            if (username && password && confirmPassword && secretCode) {
                if (password !== confirmPassword) {
                    signupError.textContent = "Passwords do not match.";
                } else {
                    const existingUser = users.find(user => user.username === username);
                    if (existingUser) {
                        signupError.textContent = "Username already exists.";
                    } else {
                        users.push({ username, password, secretCode, isApproved: false });
                        localStorage.setItem("users", JSON.stringify(users));
                        signupError.textContent = "Sign up successful! Await admin approval.";
                        signupUsername.value = '';
                        signupPassword.value = '';
                        signupConfirmPassword.value = '';
                        signupSecretCode.value = '';
                    }
                }
            } else {
                signupError.textContent = "Please fill in all fields.";
            }
        });

        // Reset password with confirmation
        document.getElementById("resetPasswordBtn").addEventListener("click", () => {
            const username = forgotUsername.value.trim();
            const secretCodeEntered = forgotSecretCode.value.trim();
            const newPassword = forgotPassword.value.trim();
            const confirmPassword = forgotConfirmPassword.value.trim();
            
            if (newPassword !== confirmPassword) {
                forgotError.textContent = "Passwords do not match.";
            } else {
                const user = users.find(u => u.username === username && u.secretCode === secretCodeEntered);
                if (user) {
                    user.password = newPassword;
                    localStorage.setItem("users", JSON.stringify(users));
                    alert("Password reset successful!");
                    forgotPasswordSection.classList.add("hidden");
                    signinSection.classList.remove("hidden");
                } else {
                    forgotError.textContent = "Username or secret code is incorrect.";
                }
            }
        });
    </script>
</body>
</html>