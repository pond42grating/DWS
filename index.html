<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create DWS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        input[type="button"],
        textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .preview-item {
            background-color: #f0f0f0;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }

        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button.remove {
            background-color: #ff4d4d;
        }

        .back-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .section-header {
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }

        .preview-container {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>Create DWS</h1>

        <div class="form-group">
            <label for="dwsNumber">DWS Number (Auto Generated)</label>
            <input type="text" id="dwsNumber" disabled />
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" />
        </div>

        <div class="form-group">
            <label for="structure">Structure Name</label>
            <input type="text" id="structure" />
        </div>

        <div class="form-group">
            <label for="siNo">SI No.</label>
            <input type="number" id="siNo" />
        </div>

        <div class="form-group">
            <label for="workDescription">Work Description</label>
            <textarea id="workDescription" rows="3"></textarea>
        </div>

        <div class="form-group">
            <label for="location">Location</label>
            <input type="text" id="location" />
        </div>

        <div class="section-header">Manpower Details</div>
        <div class="form-group">
            <label for="manpowerBadge">Badge No.</label>
            <input type="text" id="manpowerBadge" />
        </div>
        <div class="form-group">
            <label for="manpowerName">Name</label>
            <input type="text" id="manpowerName" />
        </div>
        <div class="form-group">
            <label for="normalHours">Normal Hours</label>
            <input type="number" id="normalHours" />
        </div>
        <div class="form-group">
            <label for="otHours">OT Hours</label>
            <input type="number" id="otHours" />
        </div>
        <button onclick="addManpower()">Add Manpower</button>

        <div class="section-header">Equipment Details</div>
        <div class="form-group">
            <label for="equipmentName">Equipment Name</label>
            <input type="text" id="equipmentName" />
        </div>
        <div class="form-group">
            <label for="workingHours">Working Hours</label>
            <input type="number" id="workingHours" />
        </div>
        <button onclick="addEquipment()">Add Equipment</button>

        <div class="section-header">Consumable Details</div>
        <div class="form-group">
            <label for="consumableName">Consumable Name</label>
            <input type="text" id="consumableName" />
        </div>
        <div class="form-group">
            <label for="quantity">Quantity (Nos/ML)</label>
            <input type="number" id="quantity" />
        </div>
        <button onclick="addConsumable()">Add Consumable</button>

        <div class="preview-container">
            <h3>Manpower Preview</h3>
            <div id="manpowerPreview"></div>
        </div>

        <div class="preview-container">
            <h3>Equipment Preview</h3>
            <div id="equipmentPreview"></div>
        </div>

        <div class="preview-container">
            <h3>Consumables Preview</h3>
            <div id="consumablePreview"></div>
        </div>

        <button onclick="saveDWS()">Save DWS</button>
        <button class="back-button" onclick="goBack()">Back</button>
    </div>

    <script>
        let manpowerList = [];
        let equipmentList = [];
        let consumableList = [];
        let dwsNumber = 1;

        // Automatically generate DWS Number
        document.getElementById('dwsNumber').value = dwsNumber;

        // Add Manpower to Preview
        function addManpower() {
            const badge = document.getElementById('manpowerBadge').value;
            const name = document.getElementById('manpowerName').value;
            const normalHours = document.getElementById('normalHours').value;
            const otHours = document.getElementById('otHours').value;

            if (badge && name && normalHours && otHours) {
                manpowerList.push({ badge, name, normalHours, otHours });
                displayManpower();
            } else {
                alert('Please fill in all fields for manpower.');
            }

            // Clear Inputs
            document.getElementById('manpowerBadge').value = '';
            document.getElementById('manpowerName').value = '';
            document.getElementById('normalHours').value = '';
            document.getElementById('otHours').value = '';
        }

        // Display Manpower Preview
        function displayManpower() {
            const preview = document.getElementById('manpowerPreview');
            preview.innerHTML = '';
            manpowerList.forEach((manpower, index) => {
                const item = document.createElement('div');
                item.classList.add('preview-item');
                item.innerHTML = `${manpower.badge} - ${manpower.name} - Normal Hours: ${manpower.normalHours} - OT Hours: ${manpower.otHours} <button class="remove" onclick="removeManpower(${index})">Remove</button>`;
                preview.appendChild(item);
            });
        }

        // Remove Manpower
        function removeManpower(index) {
            manpowerList.splice(index, 1);
            displayManpower();
        }

        // Add Equipment to Preview
        function addEquipment() {
            const name = document.getElementById('equipmentName').value;
            const hours = document.getElementById('workingHours').value;

            if (name && hours) {
                equipmentList.push({ name, hours });
                displayEquipment();
            } else {
                alert('Please fill in all fields for equipment.');
            }

            // Clear Inputs
            document.getElementById('equipmentName').value = '';
            document.getElementById('workingHours').value = '';
        }

        // Display Equipment Preview
        function displayEquipment() {
            const preview = document.getElementById('equipmentPreview');
            preview.innerHTML = '';
            equipmentList.forEach((equipment, index) => {
                const item = document.createElement('div');
                item.classList.add('preview-item');
                item.innerHTML = `${equipment.name} - Working Hours: ${equipment.hours} <button class="remove" onclick="removeEquipment(${index})">Remove</button>`;
                preview.appendChild(item);
            });
        }

        // Remove Equipment
        function removeEquipment(index) {
            equipmentList.splice(index, 1);
            displayEquipment();
        }

        // Add Consumable to Preview
        function addConsumable() {
            const name = document.getElementById('consumableName').value;
            const qty = document.getElementById('quantity').value;

            if (name && qty) {
                consumableList.push({ name, qty });
                displayConsumable();
            } else {
                alert('Please fill in all fields for consumable.');
            }

            // Clear Inputs
            document.getElementById('consumableName').value = '';
            document.getElementById('quantity').value = '';
        }

        // Display Consumables Preview
        function displayConsumable() {
            const preview = document.getElementById('consumablePreview');
            preview.innerHTML = '';
            consumableList.forEach((consumable, index) => {
                const item = document.createElement('div');
                item.classList.add('preview-item');
                item.innerHTML = `${consumable.name} - Quantity: ${consumable.qty} <button class="remove" onclick="removeConsumable(${index})">Remove</button>`;
                preview.appendChild(item);
            });
        }

        // Remove Consumable
        function removeConsumable(index) {
            consumableList.splice(index, 1);
            displayConsumable();
        }

        // Save DWS Data
        function saveDWS() {
            const dwsData = {
                dwsNumber,
                date: document.getElementById('date').value,
                structure: document.getElementById('structure').value,
                siNo: document.getElementById('siNo').value,
                workDescription: document.getElementById('workDescription').value,
                location: document.getElementById('location').value,
                manpower: manpowerList,
                equipment: equipmentList,
                consumables: consumableList
            };

            let savedData = JSON.parse(localStorage.getItem('dwsData')) || [];
            savedData.push(dwsData);
            localStorage.setItem('dwsData', JSON.stringify(savedData));

            alert('DWS Saved Successfully!');
            dwsNumber++; // Increment DWS Number for next entry
            document.getElementById('dwsNumber').value = dwsNumber;
        }

        // Go Back to Front Page
        function goBack() {
            window.location.href = 'index.html'; // Redirect to front page (or reload the page)
        }
    </script>

</body>

</html>