<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration and Admin Control</title>
    <style>
        .hidden { display: none; }
        .auth-section, .error { margin-bottom: 15px; }
        .back-btn { cursor: pointer; color: blue; font-size: 14px; }
        .error { color: red; }
        /* Styling for the page */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .btn {
            background-color: lightblue;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
        }
        .btn:hover {
            background-color: #3e8e41;
            color: white;
        }
    </style>
</head>
<body>

    <h1>User Registration and Admin Control</h1>

    <!-- Authentication Section -->
    <div id="authSection">
        <!-- Sign-In Section -->
        <div class="auth-section" id="signinSection">
            <h2>Sign In</h2>
            <label for="signinUsername">Username:</label>
            <input type="text" id="signinUsername" placeholder="Enter Username" required><br><br>

            <label for="signinPassword">Password:</label>
            <input type="password" id="signinPassword" placeholder="Enter Password" required><br><br>

            <button id="signinBtn" class="btn">Sign In</button>
            <p class="error" id="signinError"></p>
            <button id="goToSignupBtn" class="btn">Sign Up</button> 
        </div>

        <!-- Sign-Up Section -->
        <div id="signupSection" class="auth-section hidden">
            <span class="back-btn" id="backToLoginBtn">‚Üê Back to Login</span>
            <h2>Sign Up</h2>
            <label for="signupUsername">Username:</label>
            <input type="text" id="signupUsername" placeholder="Enter Username" required><br><br>

            <label for="signupPassword">Password:</label>
            <input type="password" id="signupPassword" placeholder="Enter Password" required><br><br>

            <label for="confirmPassword">Confirm Password:</label>
            <input type="password" id="confirmPassword" placeholder="Confirm Password" required><br><br>

            <label for="secretCode">Secret Code:</label>
            <input type="text" id="secretCode" placeholder="Enter Secret Code" required><br><br>

            <button id="signupBtn" class="btn">Sign Up</button>
            <p class="error" id="signupError"></p>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden">
        <h2>Admin Dashboard</h2>
        <button id="logoutAdminBtn" class="btn">Logout</button>
        <h3>Admin Content Goes Here</h3>
        <p>Manage users and perform admin actions.</p>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="hidden">
        <h2>User Dashboard</h2>
        <button id="logoutUserBtn" class="btn">Logout</button>
        <h3>User Content Goes Here</h3>
        <p>Welcome to your user dashboard.</p>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem("users")) || [];
        let adminLoggedIn = false;
        let currentUser = null;

        const signinBtn = document.getElementById("signinBtn");
        const signupBtn = document.getElementById("signupBtn");
        const signupSection = document.getElementById("signupSection");
        const signinSection = document.getElementById("signinSection");
        const adminDashboard = document.getElementById("adminDashboard");
        const userDashboard = document.getElementById("userDashboard");

        const signupUsername = document.getElementById("signupUsername");
        const signupPassword = document.getElementById("signupPassword");
        const confirmPassword = document.getElementById("confirmPassword");
        const secretCode = document.getElementById("secretCode");
        const signinUsername = document.getElementById("signinUsername");
        const signinPassword = document.getElementById("signinPassword");

        const signupError = document.getElementById("signupError");
        const signinError = document.getElementById("signinError");

        const backToLoginBtn = document.getElementById("backToLoginBtn");
        const goToSignupBtn = document.getElementById("goToSignupBtn");

        const logoutAdminBtn = document.getElementById("logoutAdminBtn");
        const logoutUserBtn = document.getElementById("logoutUserBtn");

        // Switch to Signup page
        goToSignupBtn.addEventListener("click", () => {
            signinSection.classList.add("hidden");
            signupSection.classList.remove("hidden");
        });

        // Back to Login page from Signup
        backToLoginBtn.addEventListener("click", () => {
            signupSection.classList.add("hidden");
            signinSection.classList.remove("hidden");
        });

        // Sign up new user
        signupBtn.addEventListener("click", () => {
            const username = signupUsername.value.trim();
            const password = signupPassword.value.trim();
            const confirmPass = confirmPassword.value.trim();
            const secret = secretCode.value.trim();

            if (username && password && confirmPass && secret) {
                if (password === confirmPass) {
                    const existingUser = users.find(user => user.username === username);
                    if (existingUser) {
                        signupError.textContent = "Username already exists.";
                    } else {
                        users.push({ username, password, secretCode: secret, isApproved: false });
                        localStorage.setItem("users", JSON.stringify(users));
                        signupError.textContent = "Sign up successful! Await admin approval.";
                    }
                } else {
                    signupError.textContent = "Passwords do not match.";
                }
            } else {
                signupError.textContent = "Please fill in all fields.";
            }
        });

        // Sign-in user
        signinBtn.addEventListener("click", () => {
            const username = signinUsername.value.trim();
            const password = signinPassword.value.trim();

            if (username && password) {
                // Check if it's an admin login
                if (username === "admin" && password === "admin123") {
                    adminLoggedIn = true;
                    currentUser = null;
                    adminDashboard.classList.remove("hidden");
                    signinSection.classList.add("hidden");
                } else {
                    // Check for regular user login
                    const user = users.find(user => user.username === username && user.password === password && user.isApproved);
                    if (user) {
                        currentUser = user;
                        userDashboard.classList.remove("hidden");
                        signinSection.classList.add("hidden");
                    } else {
                        signinError.textContent = "Invalid credentials or account not approved.";
                    }
                }
            } else {
                signinError.textContent = "Please fill in all fields.";
            }
        });

        // Logout as Admin
        logoutAdminBtn.addEventListener("click", () => {
            adminDashboard.classList.add("hidden");
            signinSection.classList.remove("hidden");
        });

        // Logout as User
        logoutUserBtn.addEventListener("click", () => {
            userDashboard.classList.add("hidden");
            signinSection.classList.remove("hidden");
        });
    </script>
</body>
</html>